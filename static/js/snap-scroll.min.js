"use strict";const SnapScrollManager={config:{throttleDelay:100,wheelThreshold:50,animationDuration:800},state:{isScrolling:!1,lastScrollTime:0,wheelDeltaAccumulator:0,currentSection:0,totalSections:0},elements:{mainElement:null,sections:[]},cache:{sectionPositions:[],viewportHeight:0,viewportWidth:0,needsUpdate:!0},init:function(){const t=this;this.cache.viewportWidth=window.RedDawnViewport?window.RedDawnViewport.width:window.innerWidth,this.cache.viewportWidth<768||this.isWindows()&&requestAnimationFrame(function(){t.cacheElements(),t.elements.mainElement&&0!==t.elements.sections.length&&(t.state.totalSections=t.elements.sections.length,t.bindEvents(),t.detectCurrentSection())})},isWindows:function(){return navigator.platform.indexOf("Win")>-1||navigator.userAgent.indexOf("Windows")>-1},cacheElements:function(){this.elements.mainElement=document.querySelector("main"),this.elements.sections=Array.from(document.querySelectorAll("section.snap-start")),this.updateCache()},updateCache:function(){window.RedDawnViewport?(this.cache.viewportHeight=window.RedDawnViewport.height,this.cache.viewportWidth=window.RedDawnViewport.width):(this.cache.viewportHeight=window.innerHeight,this.cache.viewportWidth=window.innerWidth),this.cache.sectionPositions=this.elements.sections.map(function(t){return{top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight}}),this.cache.needsUpdate=!1},invalidateCache:function(){this.cache.needsUpdate=!0},bindEvents:function(){const t=this;let e;this.elements.mainElement&&(this.elements.mainElement.addEventListener("wheel",function(e){t.handleWheel(e)},{passive:!1}),this.elements.mainElement.addEventListener("scroll",function(){t.detectCurrentSection()},{passive:!0})),window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(function(){t.invalidateCache(),t.updateCache()},250)},{passive:!0})},handleWheel:function(t){if(this.state.isScrolling)return void t.preventDefault();const e=Date.now(),i=e-this.state.lastScrollTime;if(this.state.wheelDeltaAccumulator+=t.deltaY,i<this.config.throttleDelay)return void t.preventDefault();const n=this.state.wheelDeltaAccumulator>0?1:-1;if(Math.abs(this.state.wheelDeltaAccumulator)>=this.config.wheelThreshold){t.preventDefault();const i=this.state.currentSection+n;i>=0&&i<this.state.totalSections&&this.scrollToSection(i),this.state.wheelDeltaAccumulator=0,this.state.lastScrollTime=e}},scrollToSection:function(t){const e=this;if(t<0||t>=this.cache.sectionPositions.length)return;this.state.isScrolling=!0,this.state.currentSection=t;const i=this.cache.sectionPositions[t].top;this.elements.mainElement.scrollTo({top:i,behavior:"smooth"}),setTimeout(function(){e.state.isScrolling=!1},this.config.animationDuration)},detectCurrentSection:function(){if(this.state.isScrolling)return;this.cache.needsUpdate&&this.updateCache();const t=this.elements.mainElement.scrollTop+this.cache.viewportHeight/2;for(let e=0;e<this.cache.sectionPositions.length;e++){const i=this.cache.sectionPositions[e];if(t>=i.top&&t<i.bottom){this.state.currentSection=e;break}}},scrollNext:function(){this.state.currentSection<this.state.totalSections-1&&this.scrollToSection(this.state.currentSection+1)},scrollPrevious:function(){this.state.currentSection>0&&this.scrollToSection(this.state.currentSection-1)}};