"use strict";const ScrollManager={config:{scrollThreshold:300},elements:{scrollToTopBtn:null,mainElement:null,header:null,heroSection:null,footer:null,joinSection:null},cache:{windowHeight:0,footerTop:0,buttonBottom:32,needsUpdate:!0},rafId:null,init:function(){const e=this;requestAnimationFrame(function(){e.cacheElements(),e.bindEvents(),e.initHeaderEffect(),setTimeout(function(){e.checkScrollPosition()},500)})},cacheElements:function(){this.elements.scrollToTopBtn=document.getElementById("scrollToTop"),this.elements.mainElement=document.querySelector("main"),this.elements.header=document.getElementById("site-header"),this.elements.heroSection=document.getElementById("hero-section"),this.elements.footer=document.getElementById("site-footer"),this.elements.joinSection=document.getElementById("join")},bindEvents:function(){const e=this;let t;if(window.addEventListener("scroll",function(){e.toggleScrollButton(window.pageYOffset),e.invalidateCache(),e.adjustButtonPosition()},{passive:!0}),this.elements.mainElement&&this.elements.mainElement.addEventListener("scroll",function(){e.toggleScrollButton(this.scrollTop),e.invalidateCache(),e.adjustButtonPosition()},{passive:!0}),this.elements.scrollToTopBtn&&this.elements.scrollToTopBtn.addEventListener("click",function(){e.scrollToTop()}),window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){e.invalidateCache(),e.adjustButtonPosition()},150)},{passive:!0}),window.addEventListener("load",function(){setTimeout(function(){e.checkScrollPosition()},200)},{passive:!0}),this.elements.joinSection){new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&setTimeout(function(){e.checkScrollPosition()},100)})},{threshold:.1}).observe(this.elements.joinSection)}window.addEventListener("hashchange",function(){setTimeout(function(){e.checkScrollPosition()},200),setTimeout(function(){e.checkScrollPosition()},500)},{passive:!0}),window.location.hash&&setTimeout(function(){e.checkScrollPosition()},400),document.addEventListener("click",function(t){const n=t.target.closest('a[href*="#"]');if(n&&n.hash){const t=window.location.hash===n.hash;"#join"===n.hash&&e.elements.scrollToTopBtn&&(e.elements.scrollToTopBtn.classList.remove("opacity-0","invisible"),e.elements.scrollToTopBtn.classList.add("opacity-100","visible")),setTimeout(function(){e.checkScrollPosition()},150),setTimeout(function(){e.checkScrollPosition()},400),setTimeout(function(){e.checkScrollPosition()},700),t&&(setTimeout(function(){e.checkScrollPosition()},50),setTimeout(function(){e.checkScrollPosition()},100))}},{passive:!0}),this.adjustButtonPosition()},checkScrollPosition:function(){let e=0;this.elements.mainElement&&this.elements.mainElement.scrollTop>0?e=this.elements.mainElement.scrollTop:window.pageYOffset>0?e=window.pageYOffset:document.documentElement.scrollTop>0?e=document.documentElement.scrollTop:"#join"===window.location.hash&&(e=999),this.toggleScrollButton(e),this.invalidateCache(),this.adjustButtonPosition()},toggleScrollButton:function(e){this.elements.scrollToTopBtn&&(e>this.config.scrollThreshold?(this.elements.scrollToTopBtn.classList.remove("opacity-0","invisible"),this.elements.scrollToTopBtn.classList.add("opacity-100","visible")):(this.elements.scrollToTopBtn.classList.remove("opacity-100","visible"),this.elements.scrollToTopBtn.classList.add("opacity-0","invisible")))},scrollToTop:function(){this.elements.mainElement&&this.elements.mainElement.scrollTo({top:0,behavior:"smooth"}),window.scrollTo({top:0,behavior:"smooth"}),window.location.hash&&history.replaceState(null,null,window.location.pathname+window.location.search)},updateCache:function(){this.cache.needsUpdate&&(this.cache.windowHeight=window.RedDawnViewport?window.RedDawnViewport.height:window.innerHeight,this.elements.footer&&(this.cache.footerTop=this.elements.footer.getBoundingClientRect().top),this.cache.needsUpdate=!1)},adjustButtonPosition:function(){if(!this.elements.scrollToTopBtn||!this.elements.footer)return;const e=this;this.rafId&&cancelAnimationFrame(this.rafId),this.rafId=requestAnimationFrame(function(){e.updateCache();const t=e.cache.footerTop,n=e.cache.windowHeight;if(t<n){const o=n-t+16;e.elements.scrollToTopBtn.style.bottom=o+"px"}else e.elements.scrollToTopBtn.style.bottom="";e.rafId=null})},invalidateCache:function(){this.cache.needsUpdate=!0},initHeaderEffect:function(){if(!this.elements.heroSection||!this.elements.header)return;const e=this,t=this.elements.header;new IntersectionObserver(function(e){e.forEach(function(e){t&&(e.isIntersecting?(t.classList.remove("bg-black/80","backdrop-blur-sm"),t.classList.add("bg-transparent")):(t.classList.add("bg-black/80","backdrop-blur-sm"),t.classList.remove("bg-transparent")))})},{threshold:.1}).observe(this.elements.heroSection);let n=!1;const o=function(){const e=window.pageYOffset||document.documentElement.scrollTop;window.innerWidth<1024&&(e>50?(t.classList.add("bg-black/80","backdrop-blur-sm"),t.classList.remove("bg-transparent")):(t.classList.remove("bg-black/80","backdrop-blur-sm"),t.classList.add("bg-transparent"))),n=!1};if(window.addEventListener("scroll",function(){n||(requestAnimationFrame(o),n=!0)},{passive:!0}),this.elements.mainElement){let n=!1;this.elements.mainElement.addEventListener("scroll",function(){!n&&window.innerWidth<1024&&(requestAnimationFrame(function(){e.elements.mainElement.scrollTop>50?(t.classList.add("bg-black/80","backdrop-blur-sm"),t.classList.remove("bg-transparent")):(t.classList.remove("bg-black/80","backdrop-blur-sm"),t.classList.add("bg-transparent")),n=!1}),n=!0)},{passive:!0})}}};